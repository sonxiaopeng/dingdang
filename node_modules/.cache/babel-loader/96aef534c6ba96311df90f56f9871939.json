{"remainingRequest":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\src\\components\\Clipper.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\src\\components\\Clipper.vue","mtime":1611110444785},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610353155479},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\babel-loader\\lib\\index.js","mtime":1610353154995},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610353155479},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\index.js","mtime":1610353179708}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQ3JvcHBlciBmcm9tICJjcm9wcGVyanMiOwppbXBvcnQgImNyb3BwZXJqcy9kaXN0L2Nyb3BwZXIubWluLmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidi1zaW1wbGUtY3JvcHBlciIsCiAgcHJvcHM6IHsKICAgIGluaXRQYXJhbTogT2JqZWN0LAogICAgc3VjY2Vzc0NhbGxiYWNrOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3JvcHBlcjoge30sCiAgICAgIGZpbGVuYW1lOiAiIgogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIneWni+WMluijgeWJquaPkuS7tgogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIGNyb3BwZXJJbWcgPSB0aGlzLiRyZWZzWyJjcm9wcGVySW1nIl07CiAgICAgIHRoaXMuY3JvcHBlciA9IG5ldyBDcm9wcGVyKGNyb3BwZXJJbWcsIHsKICAgICAgICBhc3BlY3RSYXRpbzogMSAvIDEsCiAgICAgICAgZHJhZ01vZGU6ICJtb3ZlIgogICAgICB9KTsKICAgIH0sCiAgICAvLyDngrnlh7vkuIrkvKDmjInpkq4KICAgIHVwbG9hZDogZnVuY3Rpb24gdXBsb2FkKCkgewogICAgICB0aGlzLiRyZWZzWyJmaWxlIl0uY2xpY2soKTsKICAgIH0sCiAgICAvLyDpgInmi6nkuIrkvKDmlofku7YKICAgIHVwbG9hZENoYW5nZTogZnVuY3Rpb24gdXBsb2FkQ2hhbmdlKGUpIHsKICAgICAgdmFyIGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgdGhpcy5maWxlbmFtZSA9IGZpbGVbIm5hbWUiXTsKICAgICAgdmFyIFVSTCA9IHdpbmRvdy5VUkwgfHwgd2luZG93LndlYmtpdFVSTDsKICAgICAgdGhpcy4kcmVmc1sibGF5ZXIiXS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgdGhpcy5jcm9wcGVyLnJlcGxhY2UoVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSk7CiAgICB9LAogICAgLy8g5Y+W5raI5LiK5LygCiAgICBjYW5jZWxIYW5kbGU6IGZ1bmN0aW9uIGNhbmNlbEhhbmRsZSgpIHsKICAgICAgdGhpcy5jcm9wcGVyLnJlc2V0KCk7CiAgICAgIHRoaXMuJHJlZnNbImxheWVyIl0uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgdGhpcy4kcmVmc1siZmlsZSJdLnZhbHVlID0gIiI7CiAgICB9LAogICAgLy8g56Gu5a6a5LiK5LygCiAgICBjb25maXJtSGFuZGxlOiBmdW5jdGlvbiBjb25maXJtSGFuZGxlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNyb3BCb3ggPSB0aGlzLmNyb3BwZXIuZ2V0Q3JvcEJveERhdGEoKTsKICAgICAgdmFyIHNjYWxlID0gdGhpcy5pbml0UGFyYW1bInNjYWxlIl0gfHwgMTsKICAgICAgdmFyIGNyb3BDYW52YXMgPSB0aGlzLmNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcyh7CiAgICAgICAgd2lkdGg6IGNyb3BCb3gud2lkdGggKiBzY2FsZSwKICAgICAgICBoZWlnaHQ6IGNyb3BCb3guaGVpZ2h0ICogc2NhbGUKICAgICAgfSk7CiAgICAgIHZhciBpbWdEYXRhID0gY3JvcENhbnZhcy50b0RhdGFVUkwoImltYWdlL2pwZWciKTsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IHdpbmRvdy5Gb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGVUeXBlIiwgdGhpcy5pbml0UGFyYW1bImZpbGVUeXBlIl0pOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImltZyIsIGltZ0RhdGEpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoInNpZ25JZCIsIHRoaXMuJGxvY2FsU3RvcmFnZSgic2lnbklkIikpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoIm9yaWdpbmFsRmlsZW5hbWUiLCB0aGlzLmZpbGVuYW1lKTsKICAgICAgd2luZG93LiRheGlvcyh0aGlzLmluaXRQYXJhbVsidXBsb2FkVVJMIl0sIGZvcm1EYXRhLCB7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuc3VjY2Vzc0NhbGxiYWNrKHJlcy5kYXRhKTsKCiAgICAgICAgX3RoaXMuY2FuY2VsSGFuZGxlKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Clipper.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"v-simple-cropper\">\r\n\t\t<slot>\r\n\t\t\t<button @click=\"upload\">上传图片</button>\r\n\t\t</slot>\r\n\t\t<input\r\n\t\t\tclass=\"file\"\r\n\t\t\tref=\"file\"\r\n\t\t\ttype=\"file\"\r\n\t\t\taccept=\"image/*\"\r\n\t\t\t@change=\"uploadChange\"\r\n\t\t/>\r\n\t\t<div class=\"v-cropper-layer\" ref=\"layer\">\r\n\t\t\t<div class=\"layer-header\">\r\n\t\t\t\t<button class=\"cancel\" @click=\"cancelHandle\">取消</button>\r\n\t\t\t\t<button class=\"confirm\" @click=\"confirmHandle\">裁剪</button>\r\n\t\t\t</div>\r\n\t\t\t<img ref=\"cropperImg\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Cropper from \"cropperjs\";\r\nimport \"cropperjs/dist/cropper.min.css\";\r\nexport default {\r\n\tname: \"v-simple-cropper\",\r\n\tprops: {\r\n\t\tinitParam: Object,\r\n\t\tsuccessCallback: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: () => {},\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcropper: {},\r\n\t\t\tfilename: \"\",\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.init();\r\n\t},\r\n\tmethods: {\r\n\t\t// 初始化裁剪插件\r\n\t\tinit() {\r\n\t\t\tlet cropperImg = this.$refs[\"cropperImg\"];\r\n\t\t\tthis.cropper = new Cropper(cropperImg, {\r\n\t\t\t\taspectRatio: 1 / 1,\r\n\t\t\t\tdragMode: \"move\",\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 点击上传按钮\r\n\t\tupload() {\r\n\t\t\tthis.$refs[\"file\"].click();\r\n\t\t},\r\n\t\t// 选择上传文件\r\n\t\tuploadChange(e) {\r\n\t\t\tlet file = e.target.files[0];\r\n\t\t\tthis.filename = file[\"name\"];\r\n\t\t\tlet URL = window.URL || window.webkitURL;\r\n\t\t\tthis.$refs[\"layer\"].style.display = \"block\";\r\n\t\t\tthis.cropper.replace(URL.createObjectURL(file));\r\n\t\t},\r\n\t\t// 取消上传\r\n\t\tcancelHandle() {\r\n\t\t\tthis.cropper.reset();\r\n\t\t\tthis.$refs[\"layer\"].style.display = \"none\";\r\n\t\t\tthis.$refs[\"file\"].value = \"\";\r\n\t\t},\r\n\t\t// 确定上传\r\n\t\tconfirmHandle() {\r\n\t\t\tlet cropBox = this.cropper.getCropBoxData();\r\n\t\t\tlet scale = this.initParam[\"scale\"] || 1;\r\n\t\t\tlet cropCanvas = this.cropper.getCroppedCanvas({\r\n\t\t\t\twidth: cropBox.width * scale,\r\n\t\t\t\theight: cropBox.height * scale,\r\n\t\t\t});\r\n\t\t\tlet imgData = cropCanvas.toDataURL(\"image/jpeg\");\r\n\t\t\tlet formData = new window.FormData();\r\n\t\t\tformData.append(\"fileType\", this.initParam[\"fileType\"]);\r\n\t\t\tformData.append(\"img\", imgData);\r\n\t\t\tformData.append(\"signId\", this.$localStorage(\"signId\"));\r\n\t\t\tformData.append(\"originalFilename\", this.filename);\r\n\t\t\twindow\r\n\t\t\t\t.$axios(this.initParam[\"uploadURL\"], formData, {\r\n\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\theaders: { \"Content-Type\": \"multipart/form-data\" },\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tthis.successCallback(res.data);\r\n\t\t\t\t\tthis.cancelHandle();\r\n\t\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.v-simple-cropper .file {\r\n\tdisplay: none;\r\n}\r\n.v-simple-cropper .v-cropper-layer {\r\n\tposition: fixed;\r\n\ttop: 0;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tright: 0;\r\n\tbackground: #fff;\r\n\tz-index: 99999;\r\n\tdisplay: none;\r\n}\r\n.v-simple-cropper .v-cropper-layer .layer-header {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tz-index: 99999;\r\n\tbackground: #fff;\r\n\twidth: 100%;\r\n\theight: 0.8rem;\r\n\tpadding: 0 0.2rem;\r\n\tbox-sizing: border-box;\r\n}\r\n.v-simple-cropper .v-cropper-layer .cancel,\r\n.v-simple-cropper .v-cropper-layer .confirm {\r\n\tline-height: 0.8rem;\r\n\tfont-size: 0.28rem;\r\n\tbackground: inherit;\r\n\tborder: 0;\r\n\toutline: 0;\r\n\tfloat: left;\r\n}\r\n.v-simple-cropper .v-cropper-layer .confirm {\r\n\tfloat: right;\r\n}\r\n.v-simple-cropper .v-cropper-layer img {\r\n\tposition: inherit !important;\r\n\tborder-radius: inherit !important;\r\n\tfloat: inherit !important;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components"}]}