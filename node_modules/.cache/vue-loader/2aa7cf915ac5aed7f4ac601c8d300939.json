{"remainingRequest":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\src\\components\\Clipper.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\src\\components\\Clipper.vue","mtime":1611110295971},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\css-loader\\dist\\cjs.js","mtime":1610353159285},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1610353179709},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\postcss-loader\\src\\index.js","mtime":1610353172117},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\less-loader\\dist\\cjs.js","mtime":1610353167684},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610353155479},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\index.js","mtime":1610353179708}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi52LXNpbXBsZS1jcm9wcGVyIC5maWxlIHsKCWRpc3BsYXk6IG5vbmU7Cn0KLnYtc2ltcGxlLWNyb3BwZXIgLnYtY3JvcHBlci1sYXllciB7Cglwb3NpdGlvbjogZml4ZWQ7Cgl0b3A6IDA7Cglib3R0b206IDA7CglsZWZ0OiAwOwoJcmlnaHQ6IDA7CgliYWNrZ3JvdW5kOiAjZmZmOwoJei1pbmRleDogOTk5OTk7CglkaXNwbGF5OiBub25lOwoudi1zaW1wbGUtY3JvcHBlciAudi1jcm9wcGVyLWxheWVyCS5sYXllci1oZWFkZXIgewoJCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCQl0b3A6IDA7CgkJbGVmdDogMDsKCQl6LWluZGV4OiA5OTk5OTsKCQliYWNrZ3JvdW5kOiAjZmZmOwoJCXdpZHRoOiAxMDAlOwoJCWhlaWdodDogMC44cmVtOwoJCXBhZGRpbmc6IDAgMC4ycmVtOwoJCWJveC1zaXppbmc6IGJvcmRlci1ib3g7Cgl9Ci52LXNpbXBsZS1jcm9wcGVyIC52LWNyb3BwZXItbGF5ZXIJLmNhbmNlbCwKLnYtc2ltcGxlLWNyb3BwZXIgLnYtY3JvcHBlci1sYXllcgkuY29uZmlybSB7CgkJbGluZS1oZWlnaHQ6IDAuOHJlbTsKCQlmb250LXNpemU6IDAuMjhyZW07CgkJYmFja2dyb3VuZDogaW5oZXJpdDsKCQlib3JkZXI6IDA7CgkJb3V0bGluZTogMDsKCQlmbG9hdDogbGVmdDsKCX0KLnYtc2ltcGxlLWNyb3BwZXIgLnYtY3JvcHBlci1sYXllcgkuY29uZmlybSB7CgkJZmxvYXQ6IHJpZ2h0OwoJfQoudi1zaW1wbGUtY3JvcHBlciAudi1jcm9wcGVyLWxheWVyCWltZyB7CgkJcG9zaXRpb246IGluaGVyaXQgIWltcG9ydGFudDsKCQlib3JkZXItcmFkaXVzOiBpbmhlcml0ICFpbXBvcnRhbnQ7CgkJZmxvYXQ6IGluaGVyaXQgIWltcG9ydGFudDsKCX0KfQoK"},{"version":3,"sources":["Clipper.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Clipper.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div class=\"v-simple-cropper\">\r\n\t\t<slot>\r\n\t\t\t<button @click=\"upload\">上传图片</button>\r\n\t\t</slot>\r\n\t\t<input class=\"file\" ref=\"file\" type=\"file\" accept=\"image/*\" @change=\"uploadChange\" />\r\n\t\t<div class=\"v-cropper-layer\" ref=\"layer\">\r\n\t\t\t<div class=\"layer-header\">\r\n\t\t\t\t<button class=\"cancel\" @click=\"cancelHandle\">取消</button>\r\n\t\t\t\t<button class=\"confirm\" @click=\"confirmHandle\">裁剪</button>\r\n\t\t\t</div>\r\n\t\t\t<img ref=\"cropperImg\" />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Cropper from \"cropperjs\";\r\nimport \"cropperjs/dist/cropper.min.css\";\r\nexport default {\r\n\tname: \"v-simple-cropper\",\r\n\tprops: {\r\n\t\tinitParam: Object,\r\n\t\tsuccessCallback: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: () => {},\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcropper: {},\r\n\t\t\tfilename: \"\",\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.init();\r\n\t},\r\n\tmethods: {\r\n\t\t// 初始化裁剪插件\r\n\t\tinit() {\r\n\t\t\tlet cropperImg = this.$refs[\"cropperImg\"];\r\n\t\t\tthis.cropper = new Cropper(cropperImg, {\r\n\t\t\t\taspectRatio: 1 / 1,\r\n\t\t\t\tdragMode: \"move\",\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 点击上传按钮\r\n\t\tupload() {\r\n\t\t\tthis.$refs[\"file\"].click();\r\n\t\t},\r\n\t\t// 选择上传文件\r\n\t\tuploadChange(e) {\r\n\t\t\tlet file = e.target.files[0];\r\n\t\t\tthis.filename = file[\"name\"];\r\n\t\t\tlet URL = window.URL || window.webkitURL;\r\n\t\t\tthis.$refs[\"layer\"].style.display = \"block\";\r\n\t\t\tthis.cropper.replace(URL.createObjectURL(file));\r\n\t\t},\r\n\t\t// 取消上传\r\n\t\tcancelHandle() {\r\n\t\t\tthis.cropper.reset();\r\n\t\t\tthis.$refs[\"layer\"].style.display = \"none\";\r\n\t\t\tthis.$refs[\"file\"].value = \"\";\r\n\t\t},\r\n\t\t// 确定上传\r\n\t\tconfirmHandle() {\r\n\t\t\tlet cropBox = this.cropper.getCropBoxData();\r\n\t\t\tlet scale = this.initParam[\"scale\"] || 1;\r\n\t\t\tlet cropCanvas = this.cropper.getCroppedCanvas({\r\n\t\t\t\twidth: cropBox.width * scale,\r\n\t\t\t\theight: cropBox.height * scale,\r\n\t\t\t});\r\n\t\t\tlet imgData = cropCanvas.toDataURL(\"image/jpeg\");\r\n\t\t\tlet formData = new window.FormData();\r\n\t\t\tformData.append(\"fileType\", this.initParam[\"fileType\"]);\r\n\t\t\tformData.append(\"img\", imgData);\r\n\t\t\tformData.append(\"signId\", this.$localStorage(\"signId\"));\r\n\t\t\tformData.append(\"originalFilename\", this.filename);\r\n\t\t\twindow\r\n\t\t\t\t.$axios(this.initParam[\"uploadURL\"], formData, {\r\n\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\theaders: { \"Content-Type\": \"multipart/form-data\" },\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tthis.successCallback(res.data);\r\n\t\t\t\t\tthis.cancelHandle();\r\n\t\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n\t.v-simple-cropper .file {\r\n\t\tdisplay: none;\r\n\t}\r\n\t.v-simple-cropper .v-cropper-layer {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbackground: #fff;\r\n\t\tz-index: 99999;\r\n\t\tdisplay: none;\r\n\t.v-simple-cropper .v-cropper-layer\t.layer-header {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tz-index: 99999;\r\n\t\t\tbackground: #fff;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 0.8rem;\r\n\t\t\tpadding: 0 0.2rem;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\t.v-simple-cropper .v-cropper-layer\t.cancel,\r\n\t.v-simple-cropper .v-cropper-layer\t.confirm {\r\n\t\t\tline-height: 0.8rem;\r\n\t\t\tfont-size: 0.28rem;\r\n\t\t\tbackground: inherit;\r\n\t\t\tborder: 0;\r\n\t\t\toutline: 0;\r\n\t\t\tfloat: left;\r\n\t\t}\r\n\t.v-simple-cropper .v-cropper-layer\t.confirm {\r\n\t\t\tfloat: right;\r\n\t\t}\r\n\t.v-simple-cropper .v-cropper-layer\timg {\r\n\t\t\tposition: inherit !important;\r\n\t\t\tborder-radius: inherit !important;\r\n\t\t\tfloat: inherit !important;\r\n\t\t}\r\n\t}\r\n\r\n</style>\r\n"]}]}