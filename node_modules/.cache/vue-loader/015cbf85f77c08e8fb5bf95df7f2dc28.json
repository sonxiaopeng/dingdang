{"remainingRequest":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\src\\views\\Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\src\\views\\Search.vue","mtime":1611104938741},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610353155479},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\babel-loader\\lib\\index.js","mtime":1610353154995},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610353155479},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\index.js","mtime":1610353179708}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBUb2FzdCB9IGZyb20gJ3ZhbnQnOw0KZXhwb3J0IGRlZmF1bHQgew0KCWRhdGEoKSB7DQoJCXJldHVybiB7DQogICAgICAgICAgICBxdWVzdGlvbnM6IFtdLA0KICAgICAgICAgICAgYXJ0aWNsZXM6IFtdLA0KCQkJaGlzdG9yeVNob3c6IGZhbHNlLA0KCQkJc2VhcmNoVmFsOiAiIiwNCgkJCWFjdGl2ZTogMSwNCgkJCWtleXdvcmRzOiBbXSwNCiAgICAgICAgICAgIHVybDogIi9hcnRpY2xlZGV0YWlsIiwNCgkJfTsNCgl9LA0KCW1ldGhvZHM6IHsNCgkJb25TZWFyY2goKSB7DQoJCQlpZiAodGhpcy5zZWFyY2hWYWwgPT0gIiIpIHsNCgkJCQlyZXR1cm4gZmFsc2U7DQoJCQl9DQoJCQlsZXQgaGlzdG9yeXMgPSBbXTsNCgkJCWxldCBoaXN0b3J5U3RyID0gZGVjb2RlVVJJKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzZXJhY2hoaXN0b3J5IikpOw0KCQkJaWYgKGhpc3RvcnlTdHIgIT0gIm51bGwiKSB7DQoJCQkJaGlzdG9yeXMgPSBoaXN0b3J5U3RyLnNwbGl0KCIsIik7DQoJCQl9DQoNCgkJCWlmIChoaXN0b3J5cy5sZW5ndGggPiA1KSB7DQoJCQkJaGlzdG9yeXMuc2hpZnQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbGV0IGFyciA9IGhpc3RvcnlzLmZpbHRlcihpdGVtPT57DQogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPT0gdGhpcy5zZWFyY2hWYWwNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICBpZihhcnIubGVuZ3RoID09IDApew0KICAgICAgICAgICAgICAgIGhpc3RvcnlzLnB1c2godGhpcy5zZWFyY2hWYWwpOw0KICAgICAgICAgICAgfQ0KCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oDQoJCQkJInNlcmFjaGhpc3RvcnkiLA0KCQkJCWVuY29kZVVSSShoaXN0b3J5cy5qb2luKCIsIikpDQoJCQkpOw0KCQkJbGV0IHNlYXJjaENhdGVnb3J5ID0gIiI7DQoJCQlzd2l0Y2ggKHRoaXMuYWN0aXZlKSB7DQoJCQkJY2FzZSAxOg0KCQkJCQlzZWFyY2hDYXRlZ29yeSA9ICJhcnRpY2xlIjsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAyOg0KCQkJCQlzZWFyY2hDYXRlZ29yeSA9ICJxdWVzdGlvbiI7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgMzoNCgkJCQkJc2VhcmNoQ2F0ZWdvcnkgPSAiaG9zcGl0YWwiOw0KCQkJCQlicmVhazsNCgkJCQljYXNlIDQ6DQoJCQkJCXNlYXJjaENhdGVnb3J5ID0gImRvY3RvciI7DQoJCQkJCWJyZWFrOw0KCQkJfQ0KCQkJdGhpcy5heGlvcy5nZXQoYC9zZWFyY2gvJHtzZWFyY2hDYXRlZ29yeX1gLCB7DQoJCQkJcGFyYW1zOiB7DQogICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IHRoaXMuc2VhcmNoVmFsDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKHZhbHVlPT57DQogICAgICAgICAgICAgICAgbGV0IHJlc0RhdGEgPSB2YWx1ZS5kYXRhDQogICAgICAgICAgICAgICAgaWYocmVzRGF0YS5jb2RlID09IDApew0KICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmFjdGl2ZSA9PSAxKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXJ0aWNsZXMgPSAgcmVzRGF0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmFjdGl2ZSA9PSAyKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zID0gIHJlc0RhdGEuZGF0YTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgVG9hc3QocmVzRGF0YS5tZXNzYWdlKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSkNCg0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChyZWFzb249PnsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pDQogICAgICAgICAgICB9KQ0KCQl9LA0KCQlzZXRBY3RpdmUobmFtZSkgew0KCQkJdGhpcy5zZWFyY2hWYWwgPSBuYW1lOw0KCQl9LA0KCQlvbkNsaWNrUmlnaHQoKSB7DQoJCQlsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgic2VyYWNoaGlzdG9yeSIpOw0KCQkJdGhpcy5oaXN0b3J5U2hvdyA9IGZhbHNlOw0KCQl9LA0KCX0sDQoJbW91bnRlZCgpIHsNCgkJaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJzZXJhY2hoaXN0b3J5IikpIHsNCgkJCXRoaXMuaGlzdG9yeVNob3cgPSB0cnVlOw0KCQkJdGhpcy5rZXl3b3JkcyA9IGRlY29kZVVSSSgNCgkJCQlsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgic2VyYWNoaGlzdG9yeSIpDQoJCQkpLnNwbGl0KCIsIik7DQoJCX0NCgl9LA0KfTsNCg=="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div id=\"search\">\r\n\t\t<div class=\"search-header\">\r\n\t\t\t<van-search\r\n\t\t\t\tv-model=\"searchVal\"\r\n\t\t\t\tplaceholder=\"搜索文章/医生/医院/疾病\"\r\n\t\t\t\tshape=\"round\"\r\n\t\t\t\tshow-action\r\n\t\t\t>\r\n\t\t\t\t<template #left-icon>\r\n\t\t\t\t\t<img src=\"@/assets/images/home/search-icon.png\" alt=\"\" />\r\n\t\t\t\t</template>\r\n\t\t\t\t<template #action>\r\n\t\t\t\t\t<div @click=\"onSearch\">搜索</div>\r\n\t\t\t\t</template>\r\n\t\t\t</van-search>\r\n\t\t</div>\r\n\t\t<van-tabs v-model=\"active\" color=\"#00c792\">\r\n\t\t\t<van-tab title=\"文章\" :name=\"1\"></van-tab>\r\n\t\t\t<van-tab title=\"问题\" :name=\"2\"></van-tab>\r\n\t\t\t<van-tab title=\"医院\" :name=\"3\"></van-tab>\r\n\t\t\t<van-tab title=\"医生\" :name=\"4\"></van-tab>\r\n\t\t</van-tabs>\r\n\t\t<van-nav-bar\r\n\t\t\tleft-text=\"历史搜索\"\r\n\t\t\t@click-right=\"onClickRight\"\r\n\t\t\t:border=\"false\"\r\n\t\t\tv-if=\"historyShow\"\r\n\t\t>\r\n\t\t\t<template #right>\r\n\t\t\t\t<van-icon name=\"delete-o\" color=\"#646566\" size=\"20\" />\r\n\t\t\t</template>\r\n\t\t</van-nav-bar>\r\n\t\t<div class=\"questions-tags\" v-if=\"historyShow\">\r\n\t\t\t<van-tag\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tv-for=\"(item, index) of keywords\"\r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\t@click=\"setActive(item)\"\r\n\t\t\t>\r\n\t\t\t\t{{ item }}\r\n\t\t\t</van-tag>\r\n\t\t</div>\r\n        <div class=\"articles-content\" v-if=\"active == 1\">\r\n            <article-list\r\n                v-for=\"(item, index) of articles\"\r\n                :key=\"index\"\r\n                :title=\"item.subject\"\r\n                :content=\"item.description\"\r\n                :imgurl=\"item.img\"\r\n                :url=\"url + `?articleid=${item.article_id}`\"\r\n            ></article-list>\r\n        </div>\r\n        <div class=\"questions-content\" v-if=\"active == 2\">\r\n            <question-list\r\n                :imgurl=\"item.imgurl\"\r\n                :nickname=\"item.nickname\"\r\n                :describe=\"item.describe\"\r\n                :committime=\"item.committime\"\r\n                :index=\"item.quesid\"\r\n                v-for=\"(item, index) of questions\"\r\n                :key=\"index\"\r\n            ></question-list>\r\n        </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n            questions: [],\r\n            articles: [],\r\n\t\t\thistoryShow: false,\r\n\t\t\tsearchVal: \"\",\r\n\t\t\tactive: 1,\r\n\t\t\tkeywords: [],\r\n            url: \"/articledetail\",\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tonSearch() {\r\n\t\t\tif (this.searchVal == \"\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet historys = [];\r\n\t\t\tlet historyStr = decodeURI(localStorage.getItem(\"serachhistory\"));\r\n\t\t\tif (historyStr != \"null\") {\r\n\t\t\t\thistorys = historyStr.split(\",\");\r\n\t\t\t}\r\n\r\n\t\t\tif (historys.length > 5) {\r\n\t\t\t\thistorys.shift();\r\n            }\r\n            \r\n            let arr = historys.filter(item=>{\r\n                return item == this.searchVal\r\n            })\r\n            if(arr.length == 0){\r\n                historys.push(this.searchVal);\r\n            }\r\n\t\t\tlocalStorage.setItem(\r\n\t\t\t\t\"serachhistory\",\r\n\t\t\t\tencodeURI(historys.join(\",\"))\r\n\t\t\t);\r\n\t\t\tlet searchCategory = \"\";\r\n\t\t\tswitch (this.active) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tsearchCategory = \"article\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tsearchCategory = \"question\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tsearchCategory = \"hospital\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tsearchCategory = \"doctor\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.axios.get(`/search/${searchCategory}`, {\r\n\t\t\t\tparams: {\r\n                    keyword: this.searchVal\r\n                }\r\n            })\r\n            .then(value=>{\r\n                let resData = value.data\r\n                if(resData.code == 0){\r\n                    if(this.active == 1){\r\n                        this.articles =  resData.data;\r\n                    }else if(this.active == 2){\r\n                        this.questions =  resData.data;\r\n                    }\r\n                }else {\r\n                    Toast(resData.message)\r\n                }\r\n                console.log(value)\r\n\r\n            })\r\n            .catch(reason=>{\r\n                console.log(reason)\r\n            })\r\n\t\t},\r\n\t\tsetActive(name) {\r\n\t\t\tthis.searchVal = name;\r\n\t\t},\r\n\t\tonClickRight() {\r\n\t\t\tlocalStorage.removeItem(\"serachhistory\");\r\n\t\t\tthis.historyShow = false;\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tif (localStorage.getItem(\"serachhistory\")) {\r\n\t\t\tthis.historyShow = true;\r\n\t\t\tthis.keywords = decodeURI(\r\n\t\t\t\tlocalStorage.getItem(\"serachhistory\")\r\n\t\t\t).split(\",\");\r\n\t\t}\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#search >>> .van-nav-bar__text {\r\n\tfont-size: 18px;\r\n\tfont-weight: 700;\r\n}\r\n\r\n/* 公开问题样式开始 */\r\n#search >>> .questions-tags {\r\n\tpadding: 5px 4px 20px 10px;\r\n\tdisplay: flex;\r\n\tflex-flow: row wrap;\r\n\talign-items: center;\r\n\tborder-bottom: 1px solid #eee;\r\n}\r\n\r\n#search >>> .van-tag {\r\n\tpadding: 8px 12px;\r\n\tfont-weight: 300;\r\n\tfont-size: 14px;\r\n\tline-height: 16px;\r\n\twhite-space: nowrap;\r\n\ttext-overflow: ellipsis;\r\n\tborder-radius: 2px;\r\n\tmax-width: 343px;\r\n\tmargin: 4px 12px 0 0;\r\n\toverflow: hidden;\r\n\tcolor: #4d4d4d;\r\n\tbackground-color: #fafafa;\r\n}\r\n/* 公开问题样式结束 */\r\n\r\n/* 顶部搜索框样式开始 */\r\n#search >>> .search-header .van-search__action {\r\n\tbackground-color: #00c792;\r\n\tborder-radius: 17px;\r\n\tcolor: #fff;\r\n\tmargin-left: 10px;\r\n\tpadding: 0 15px;\r\n}\r\n\r\n#search >>> .search-header {\r\n\twidth: 100%;\r\n\tbox-sizing: border-box;\r\n\tmax-width: 768px;\r\n}\r\n\r\n#search >>> .search-header .van-search {\r\n\tpadding: 10px 16px;\r\n}\r\n\r\n#search >>> .search-header .van-search .van-search__content {\r\n\tborder: 0.5px solid #d9d9d9;\r\n\tbox-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.05);\r\n\tbackground-color: #fff;\r\n\tpadding-left: 15px;\r\n}\r\n\r\n#search >>> .search-header .van-search .van-cell {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\theight: 42px;\r\n}\r\n\r\n#search >>> .search-header .van-field__left-icon img {\r\n\twidth: 22px;\r\n\theight: 22px;\r\n\tmin-width: 22px;\r\n\tmargin-right: 5px;\r\n}\r\n\r\n#search >>> .search-header .van-field__control::-webkit-input-placeholder {\r\n\tcolor: #999;\r\n\tfont-weight: bold;\r\n\tfont-size: 15px;\r\n}\r\n/* 顶部搜索框样式结束 */\r\n</style>"]}]}