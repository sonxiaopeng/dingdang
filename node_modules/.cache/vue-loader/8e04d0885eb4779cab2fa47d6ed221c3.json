{"remainingRequest":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\src\\views\\emgcall\\Symptom.vue?vue&type=style&index=0&id=5b840eed&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\src\\views\\emgcall\\Symptom.vue","mtime":1611146216058},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\css-loader\\dist\\cjs.js","mtime":1610353159285},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1610353179709},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\postcss-loader\\src\\index.js","mtime":1610353172117},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610353155479},{"path":"C:\\Users\\web\\Desktop\\myGit\\Dr.Dingdang\\node_modules\\vue-loader\\lib\\index.js","mtime":1610353179708}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQojc3ltcHRvbSA+Pj4gLm92ZXJsYXktd3JhcHBlciAuYnRuOjphZnRlciB7DQoJcG9zaXRpb246IGFic29sdXRlOw0KCXRvcDogLTFweDsNCglsZWZ0OiAwOw0KCWRpc3BsYXk6IGJsb2NrOw0KCXdpZHRoOiAxMDAlOw0KCWhlaWdodDogMXB4Ow0KCWJvcmRlci10b3A6IDFweCBzb2xpZCAjZDlkOWQ5Ow0KCS13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZVkoMC41KTsNCgktbXMtdHJhbnNmb3JtOiBzY2FsZVkoMC41KTsNCgl0cmFuc2Zvcm06IHNjYWxlWSgwLjUpOw0KCS13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogMCAxMDAlOw0KCS1tcy10cmFuc2Zvcm0tb3JpZ2luOiAwIDEwMCU7DQoJdHJhbnNmb3JtLW9yaWdpbjogMCAxMDAlOw0KCWNvbnRlbnQ6ICIiOw0KfQ0KDQojc3ltcHRvbSA+Pj4gLm92ZXJsYXktd3JhcHBlciAuYnRuIHsNCglwb3NpdGlvbjogcmVsYXRpdmU7DQoJY29sb3I6ICMxYTlmOGM7DQoJcGFkZGluZzogMjBweCAwOw0KfQ0KDQojc3ltcHRvbSA+Pj4gLm92ZXJsYXktd3JhcHBlciAuZGVzYyBhIHsNCgljb2xvcjogIzAwYzc5MjsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQoJbGluZS1oZWlnaHQ6IDIwcHg7DQp9DQoNCiNzeW1wdG9tID4+PiAub3ZlcmxheS13cmFwcGVyIC5kZXNjIHsNCglwYWRkaW5nOiAxNXB4IDQlOw0KCWNvbG9yOiAjNjY2Ow0KCWZvbnQtc2l6ZTogMTRweDsNCgl3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7DQoJd29yZC1icmVhazogYnJlYWstYWxsOw0KCWxpbmUtaGVpZ2h0OiAyMHB4Ow0KfQ0KI3N5bXB0b20gPj4+IC5vdmVybGF5LXdyYXBwZXIgLnRpdCB7DQoJcGFkZGluZy10b3A6IDEwcHg7DQoJZm9udC13ZWlnaHQ6IDQwMDsNCglmb250LXNpemU6IDE2cHg7DQp9DQoNCiNzeW1wdG9tID4+PiAub3ZlcmxheS13cmFwcGVyIHsNCglwb3NpdGlvbjogZml4ZWQ7DQoJdG9wOiA1MCU7DQoJbGVmdDogNTAlOw0KCXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOw0KCXotaW5kZXg6IDExMjsNCgl3aWR0aDogODYlOw0KCW1heC13aWR0aDogMzAwcHg7DQoJb3ZlcmZsb3c6IGhpZGRlbjsNCgl0ZXh0LWFsaWduOiBjZW50ZXI7DQoJYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCglib3JkZXItcmFkaXVzOiA2cHg7DQp9DQoNCiNzeW1wdG9tID4+PiAubmV4dC1idG4gew0KCWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQoJcG9zaXRpb246IGZpeGVkOw0KCWJvdHRvbTogMDsNCglsZWZ0OiAwOw0KCXdpZHRoOiAxMDAlOw0KCXBhZGRpbmc6IDEwcHggMTZweDsNCn0NCg0KI3N5bXB0b20gPj4+IC5pbWctdXBsb2FkIC52YW4tY2VsbCB7DQoJcGFkZGluZzogMDsNCgltYXJnaW4tdG9wOiAxMHB4Ow0KfQ0KDQojc3ltcHRvbSA+Pj4gLmltZy11cGxvYWQgLnZhbi1jZWxsIHNwYW4gew0KCWNvbG9yOiAjMDBjNzkyOw0KCWZvbnQtc2l6ZTogMTJweDsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KfQ0KDQojc3ltcHRvbSA+IGltZyB7DQoJd2lkdGg6IDEwMCU7DQp9DQoNCiNzeW1wdG9tIC5pbWctdXBsb2FkIHsNCglwb3NpdGlvbjogcmVsYXRpdmU7DQoJcGFkZGluZzogNCUgMTBweCA0JTsNCn0NCg0KI3N5bXB0b20gLmltZy11cGxvYWQ6OmFmdGVyIHsNCgljb250ZW50OiAiIjsNCglkaXNwbGF5OiBibG9jazsNCglwb3NpdGlvbjogYWJzb2x1dGU7DQoJbGVmdDogMDsNCgloZWlnaHQ6IDFweDsNCgl3aWR0aDogMTAwJTsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjZWJlYmViOw0KCXRyYW5zZm9ybTogc2NhbGVZKDAuNSk7DQp9DQoNCiNzeW1wdG9tIC5pbWctdXBsb2FkOjphZnRlciB7DQoJYm90dG9tOiAwOw0KfQ0KDQojc3ltcHRvbSA+Pj4gLmltZy11cGxvYWQgLnZhbi11cGxvYWRlcl9fcHJldmlldyB7DQoJLyogZmxleDogMCAwIDAuMjU7ICovDQoJbWFyZ2luLWJvdHRvbTogOHB4Ow0KfQ0KDQojc3ltcHRvbSA+Pj4gLmltZy11cGxvYWQgLnZhbi11cGxvYWRlcl9fcHJldmlldy1kZWxldGUgew0KCWxlZnQ6IC01cHg7DQoJdG9wOiAtNXB4Ow0KCXdpZHRoOiAxOHB4Ow0KCWhlaWdodDogMThweDsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjMDBjYzk2Ow0KCWJvcmRlci1yYWRpdXM6IDUwJTsNCglib3JkZXI6IDJweCBzb2xpZCAjZmZmOw0KfQ0KDQojc3ltcHRvbSA+Pj4gLmltZy11cGxvYWQgLnZhbi11cGxvYWRlcl9fcHJldmlldy1kZWxldGUgPiBpIHsNCglsaW5lLWhlaWdodDogMThweDsNCgl0ZXh0LWFsaWduOiBjZW50ZXI7DQoJdG9wOiAwOw0KCXJpZ2h0OiAwOw0KCXdpZHRoOiAxMDAlOw0KCWhlaWdodDogMTAwJTsNCglwb3NpdGlvbjogcmVsYXRpdmU7DQoJdHJhbnNmb3JtOiBzY2FsZSgxKTsNCn0NCg0KI3N5bXB0b20gPj4+IC5pbWctdXBsb2FkIC52YW4tdXBsb2FkZXJfX3ByZXZpZXctaW1hZ2UgaW1nIHsNCglib3JkZXItcmFkaXVzOiA0cHg7DQp9DQoNCiNzeW1wdG9tID4+PiAuaW1nLXVwbG9hZCAudXBsb2FkZXItZGVzY3JpcHRpb24gew0KCXBvc2l0aW9uOiBhYnNvbHV0ZTsNCgloZWlnaHQ6IDgwcHg7DQoJdG9wOiAzN3B4Ow0KCWxlZnQ6IDExMHB4Ow0KCWZvbnQtc2l6ZTogMTJweDsNCglsaW5lLWhlaWdodDogMjBweDsNCgljb2xvcjogIzk5OTsNCn0NCg=="},{"version":3,"sources":["Symptom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Symptom.vue","sourceRoot":"src/views/emgcall","sourcesContent":["<template>\r\n\t<div id=\"symptom\">\r\n\t\t<img src=\"@/assets/images/emgcall/3362051587051885721-22.png\" alt=\"\" />\r\n\r\n\t\t<van-field\r\n\t\t\tv-model=\"message\"\r\n\t\t\ttype=\"textarea\"\r\n\t\t\tplaceholder=\"简要描述你的年龄、性别及症状，我们将为你接通对症的专科医生，并确保隐私安全\"\r\n\t\t\tmaxlength=\"500\"\r\n\t\t\tshow-word-limit\r\n            @blur=\"saveMsg\"\r\n\t\t/>\r\n\r\n\t\t<div class=\"img-upload\">\r\n\t\t\t<van-uploader v-model=\"fileList\" multiple :max-count=\"9\" \r\n            :max-size=\"10 * 1024 * 1024\" @oversize=\"onOversize\"\r\n            />\r\n\t\t\t<div class=\"uploader-description\" v-if=\"isDescShow\">\r\n\t\t\t\t上传图片辅助说明病情\r\n\t\t\t\t<br />\r\n\t\t\t\t可上传 9 张\r\n\t\t\t</div>\r\n\t\t\t<van-cell value=\" 无法上传图片？ \" @click=\"showAnswer\" />\r\n\t\t</div>\r\n\t\t<div class=\"next-btn\">\r\n\t\t\t<van-button size=\"large\" color=\"#00c792\" round @click=\"next\"\r\n\t\t\t\t>下一步</van-button\r\n\t\t\t>\r\n\t\t</div>\r\n\t\t<van-overlay :show=\"overlayShow\">\r\n\t\t\t<div class=\"overlay-wrapper\">\r\n\t\t\t\t<div class=\"tit\">请提问后通过丁香医生App上传图片</div>\r\n\t\t\t\t<div class=\"desc\">\r\n\t\t\t\t\t由于第三方或浏览器版本限制，图片可能无法上传。请先提交问题。医生回复后，【下载丁香医生App在“我的问诊”内追问并上传图片】，点击下方链接进行下载（若无法下载，请复制链接到浏览器粘贴）\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<a src=\"https://app.dxy.cn/aspirin/index\">https://app.dxy.cn/aspirin/index</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"btn\" @click=\"closeBtn\">我知道了</div>\r\n\t\t\t</div>\r\n\t\t</van-overlay>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast, Dialog } from \"vant\";\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmessage: \"\",\r\n\t\t\tfileList: [],\r\n\t\t\tisDescShow: true,\r\n\t\t\toverlayShow: false,\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tfileList(newVal) {\r\n\t\t\tif (newVal.length > 0) {\r\n\t\t\t\tthis.isDescShow = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isDescShow = true;\r\n\t\t\t}\r\n\t\t},\r\n    },\r\n    mounted(){\r\n        this.message = localStorage.getItem('symptomDesc')\r\n    },\r\n\tmethods: {\r\n        onOversize(){\r\n            Toast('文件大小不能超过10M');\r\n        },\r\n        saveMsg(){\r\n            localStorage.setItem('symptomDesc', this.message)\r\n        },\r\n\t\tshowAnswer() {\r\n\t\t\tthis.overlayShow = true;\r\n\t\t},\r\n\t\tnext() {\r\n\t\t\tif (!this.$store.state.userInfo) {\r\n\t\t\t\tDialog.confirm({\r\n\t\t\t\t\ttitle: \"未登录\",\r\n\t\t\t\t\tmessage: \"是否前往登录？\",\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.$router.push(\"/login\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t// on cancel\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this.message.length <= 10) {\r\n\t\t\t\tToast(\"请至少输入10个字\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconsole.log(this.fileList);\r\n\t\t\tlet formData = new FormData();\r\n\t\t\t[...this.fileList].forEach(item => {\r\n\t\t\t\tlet byteString = atob(\r\n\t\t\t\t\titem.content.replace(/^data:image\\/\\w+;base64,/, \"\")\r\n\t\t\t\t);\r\n\t\t\t\tlet mimeString = item.content\r\n\t\t\t\t\t.split(\",\")[0]\r\n\t\t\t\t\t.split(\":\")[1]\r\n\t\t\t\t\t.split(\";\")[0];\r\n\t\t\t\tlet ab = new ArrayBuffer(byteString.length);\r\n\t\t\t\tlet ia = new Uint8Array(ab);\r\n\t\t\t\tfor (var i = 0; i < byteString.length; i++) {\r\n\t\t\t\t\tia[i] = byteString.charCodeAt(i);\r\n\t\t\t\t}\r\n\t\t\t\tlet blob = new Blob([ia], { type: mimeString });\r\n\t\t\t\tformData.append(\"uploadFile\", blob, Date.now() + \".jpg\");\r\n            });\r\n            // [...this.fileList].forEach(item => {\r\n            //     formData.append(\"uploadFile\", item);\r\n            // });\r\n\t\t\tformData.append(\"userid\", this.$store.state.userInfo.user_id);\r\n\t\t\tformData.append(\"desc\", this.message);\r\n\t\t\tformData.append(\"create_at\", Date.parse(new Date()));\r\n\t\t\tthis.axios\r\n\t\t\t\t.post(\"/emgcall/addsymptomimg\", formData)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\tthis.$router.push(\"/emgcall/patient-list\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tToast(res.data.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(reason => {\r\n\t\t\t\t\tconsole.log(reason);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tcloseBtn() {\r\n\t\t\tthis.overlayShow = false;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#symptom >>> .overlay-wrapper .btn::after {\r\n\tposition: absolute;\r\n\ttop: -1px;\r\n\tleft: 0;\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\theight: 1px;\r\n\tborder-top: 1px solid #d9d9d9;\r\n\t-webkit-transform: scaleY(0.5);\r\n\t-ms-transform: scaleY(0.5);\r\n\ttransform: scaleY(0.5);\r\n\t-webkit-transform-origin: 0 100%;\r\n\t-ms-transform-origin: 0 100%;\r\n\ttransform-origin: 0 100%;\r\n\tcontent: \"\";\r\n}\r\n\r\n#symptom >>> .overlay-wrapper .btn {\r\n\tposition: relative;\r\n\tcolor: #1a9f8c;\r\n\tpadding: 20px 0;\r\n}\r\n\r\n#symptom >>> .overlay-wrapper .desc a {\r\n\tcolor: #00c792;\r\n\ttext-decoration: none;\r\n\tline-height: 20px;\r\n}\r\n\r\n#symptom >>> .overlay-wrapper .desc {\r\n\tpadding: 15px 4%;\r\n\tcolor: #666;\r\n\tfont-size: 14px;\r\n\tword-wrap: break-word;\r\n\tword-break: break-all;\r\n\tline-height: 20px;\r\n}\r\n#symptom >>> .overlay-wrapper .tit {\r\n\tpadding-top: 10px;\r\n\tfont-weight: 400;\r\n\tfont-size: 16px;\r\n}\r\n\r\n#symptom >>> .overlay-wrapper {\r\n\tposition: fixed;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, -50%);\r\n\tz-index: 112;\r\n\twidth: 86%;\r\n\tmax-width: 300px;\r\n\toverflow: hidden;\r\n\ttext-align: center;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 6px;\r\n}\r\n\r\n#symptom >>> .next-btn {\r\n\tbox-sizing: border-box;\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\tpadding: 10px 16px;\r\n}\r\n\r\n#symptom >>> .img-upload .van-cell {\r\n\tpadding: 0;\r\n\tmargin-top: 10px;\r\n}\r\n\r\n#symptom >>> .img-upload .van-cell span {\r\n\tcolor: #00c792;\r\n\tfont-size: 12px;\r\n\tbackground-color: #fff;\r\n}\r\n\r\n#symptom > img {\r\n\twidth: 100%;\r\n}\r\n\r\n#symptom .img-upload {\r\n\tposition: relative;\r\n\tpadding: 4% 10px 4%;\r\n}\r\n\r\n#symptom .img-upload::after {\r\n\tcontent: \"\";\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\theight: 1px;\r\n\twidth: 100%;\r\n\tbackground-color: #ebebeb;\r\n\ttransform: scaleY(0.5);\r\n}\r\n\r\n#symptom .img-upload::after {\r\n\tbottom: 0;\r\n}\r\n\r\n#symptom >>> .img-upload .van-uploader__preview {\r\n\t/* flex: 0 0 0.25; */\r\n\tmargin-bottom: 8px;\r\n}\r\n\r\n#symptom >>> .img-upload .van-uploader__preview-delete {\r\n\tleft: -5px;\r\n\ttop: -5px;\r\n\twidth: 18px;\r\n\theight: 18px;\r\n\tbackground-color: #00cc96;\r\n\tborder-radius: 50%;\r\n\tborder: 2px solid #fff;\r\n}\r\n\r\n#symptom >>> .img-upload .van-uploader__preview-delete > i {\r\n\tline-height: 18px;\r\n\ttext-align: center;\r\n\ttop: 0;\r\n\tright: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tposition: relative;\r\n\ttransform: scale(1);\r\n}\r\n\r\n#symptom >>> .img-upload .van-uploader__preview-image img {\r\n\tborder-radius: 4px;\r\n}\r\n\r\n#symptom >>> .img-upload .uploader-description {\r\n\tposition: absolute;\r\n\theight: 80px;\r\n\ttop: 37px;\r\n\tleft: 110px;\r\n\tfont-size: 12px;\r\n\tline-height: 20px;\r\n\tcolor: #999;\r\n}\r\n</style>\r\n"]}]}